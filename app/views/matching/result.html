{% extends "layout.html" %}

{% block page_title %}
  Connect to Verify
{% endblock %}

{% block content %}

<div class="govuk-width-container">

  {% from "breadcrumbs/macro.njk" import govukBreadcrumbs %}

  {{ govukBreadcrumbs({
    "items": [
      {
        "text": "Components",
        "href": "#"
      },
      {
        "text": "GOV.UK Verify",
        "href": "https://connect-to-verify-start.herokuapp.com/verify"
      },
      {
        "text": "Get started",
        "href": "/get-started"
      },
      {
        "text": "Match verified identities with existing data",
        "href": "/matching/match-identities"
      }
    ]
  }) }}

  <main role="main" class="govuk-main-wrapper">

    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">

        {% if data['existing-database'] == 'yes' %}

          <h1 class="govuk-heading-l">
            You need to create a matching service
          </h1>
          <p class="govuk-body">
            You must create a matching service to match verified identities with records in your database.
          </p>

          <p class="govuk-body">
            The matching service does this by following the rules you set when you decided your matching strategy. It also sends any results to GOV.UK Verify.
          </p>

          <p>Before you start you should:</p>

          <ul class="govuk-list--bullet">
            <li><a href="/matching/outcome-1-check">check the quality of your data</a></li>
            <li><a href="/matching/outcome-1-decide">decide how you’ll match identities with records</a></li>
            <li><a href="/matching/outcome-1-how-matches-are-found">read about how matches are found</a></li>
          </ul>

        {% elif data['returning-users'] == 'yes' %}

          <h1 class="govuk-heading-l">
            You need to match identities with records
          </h1>

          <p class="govuk-body">
            You need to create a database of your service’s users.
          </p>

          <p class="govuk-body">
            Once you have a database, you can use the information provided by the certified companies to create new records for your users. Your service will then be able to recognise who they are next time they sign in.
          </p>

          <h2 class="govuk-heading-m">
            Check if a user has already signed up to GOV.UK Verify
          </h2>

          <p class="govuk-body">
            Users can sometimes sign up for GOV.UK Verify more than once by creating accounts with different certified companies. Each certified company will give the user a different unique ID.
          </p>

          <p class="govuk-body">
            This means a user with 2 accounts from different certified companies can sometimes look like 2 different people.
          </p>

          <p class="govuk-body">
            You should check if the user has already signed up to GOV.UK Verify before you create a new record for them. If you don’t, you could create multiple records for the same user which will affect the overall quality of your data.
          </p>

          <p class="govuk-body">
            To do this, you should look for a record that has the same unique ID you got from GOV.UK Verify. If you can’t find one, you should look for a record that matches their name, address and date of birth.
          </p>

          <p class="govuk-body">
            If there are no matches, you can <a href="http://alphagov.github.io/rp-onboarding-tech-docs/pages/matching/createnewaccounts.html">create a new record</a> for that user.
          </p>

          <h2 class="govuk-heading-m">
            How to match identities with records
          </h2>

          <p class="govuk-body">
            You must create a matching service to match verified identities with the records you've created. The matching service will also send the results to GOV.UK Verify.
          </p>


        {% elif data['returning-users'] == 'no' %}

          <h1 class="govuk-heading-l">
            You need to create a matching service
          </h1>

          <p class="govuk-body">
            You need to tell GOV.UK Verify your service hasn’t matched a verified identity with an existing record.
          </p>

          <p class="govuk-body">
            You must create a matching service to do this.
          </p>

        {% endif %}

        <a class="govuk-button govuk-!-mt-r5" href="/build-your-service/create-matching-service">Create a matching service</a>
        <div class="govuk-!-mt-r0 govuk-!-mb-r0">
          <a href="/get-started">Return to overview</a>
        </div>
      </div>

    </div>

  </main>
</div>

{% endblock %}
